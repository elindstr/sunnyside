<h1>Edit User</h1>

<table>
  <tr>
    <td><span>Username</span></td>
    <td><input type="text" id="username" value="{{user.username}}"/></td>
  </tr>
  <tr>
    <td><button onclick="generatePassword()">Reset Password</button></td>
    <td><input type="text" id="password" value="" disabled="true"/></td>
  </tr>
  <tr>
    <td><span>Type</span></td>
    <td>
      <select id="access_level">
        <option value="customer">Customer</option>
        <option value="employee">Employee</option>
        <option value="admin">Admin</option>
      </select>
    </td>
  </tr>
<tr id="employeeRow" style="display:none">
    <td><span>Employee</span></td>
    <td>
      <select id="employee_id">
        {{#each employees}}
          <option value="{{this.id}}">{{this.last_name}}, {{this.first_name}}</option>
        {{/each}}
      </select>
    </td>
  </tr>
  <tr id="customerRow" style="display:contents">
    <td><span>Customer</span></td>
    <td>
      <select id="customer_id">
        {{#each customers}}
          <option value="{{this.id}}">{{this.last_name}}, {{this.first_name}}</option>
        {{/each}}
      </select>
    </td>
  </tr>
</table>
<button id="update" onclick="updateUser()">Update</button>
<button id="delete" onclick="deleteUser()">Delete</button>
<a href="/admin/users"><button id="cancel">Cancel</button></a>

<script src="/js/admin-users.js"></script>

<script>
// load drop down selections
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById('access_level').value = "{{user.access_level}}";
})

// toggle customer/employee hidden fields
document.getElementById("access_level").addEventListener('change', (event) => {
  if (event.target.value == "customer") {
    // change display
    document.getElementById("customerRow").style.display = "contents"
    document.getElementById("employeeRow").style.display = "none"

  }
  else {
    // change display
    document.getElementById("customerRow").style.display = "none"
    document.getElementById("employeeRow").style.display = "contents"
  }
})

</script>
</script>